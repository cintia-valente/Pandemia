<app-top-bar></app-top-bar>
<div class="conteudo">
    <div class="row justify-content-center">
        <div class="col-xl-8">
            <div class="titulo">Cadastro de Atendimentos</div>
            <form [formGroup]="registerForm" (ngSubmit)="submitAtendimento()">
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="inputUnidade">Unidade*: </label>
                        <select formControlName="unidades" id="unidade" (selectionChange)="getSelectedUnidade()"
                            (blur)="salvarLocalStorage('unidades')" class="form-control"
                            [ngClass]="{'is-invalid':registerForm.get('unidades').touched && registerForm.get('unidades').invalid}"
                            required>
                            <option value="" selected> Selecione.... </option>
                            <option *ngFor="let unidade of unidadeCarregada" [value]="unidade._id">{{unidade.nome}}
                            </option>
                        </select>
                        <div class="invalid-feedback">
                            Campo obrigatório. Por favor, selecione uma unidade.
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="inputPaciente">Paciente*: </label>
                        <select formControlName="pacientes" id="paciente" (selectionChange)="getSelectedPaciente()"
                            (blur)="salvarLocalStorage('pacientes')" class="form-control"
                            [ngClass]="{'is-invalid':registerForm.get('pacientes').touched && registerForm.get('pacientes').invalid}"
                            required>
                            <option value="" selected> Selecione.... </option>
                            <option *ngFor="let paciente of pacienteCarregado" [value]="paciente._id">{{paciente.nome}}
                            </option>
                        </select>
                        <div class="invalid-feedback">
                            Campo obrigatório. Por favor, selecione um paciente.
                        </div>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="inputData">Data:</label>
                        <input type="date" class="form-control" formControlName="data" id="data" placeholder="Email"
                            (blur)="salvarLocalStorage('data')">
                    </div>
                    <div class="form-group col-md-4">
                        <label for="inputTempo">Duração:*</label>
                        <input type="number" class="form-control" formControlName="tempo" id="tempo"
                            placeholder="Duração" (blur)="salvarLocalStorage('tempo')"
                            [ngClass]="{'is-invalid':registerForm.get('tempo').touched && registerForm.get('tempo').invalid}"
                            required>
                        <div class="invalid-feedback">
                            Campo obrigatório. Por favor, informe um valor.
                        </div>
                    </div>
                    <div class="form-group col-md-3">
                        <label for="inputContagio">Possibilidade de Contágio*: </label>
                        <select [(ngModel)]="selectedContagio" formControlName="possibContagio" id="possibContagio"
                            class="form-control" (blur)="salvarLocalStorage('possibContagio')"
                            [ngClass]="{'is-invalid':registerForm.get('possibContagio').touched && registerForm.get('possibContagio').invalid}"
                            required>
                            <option value="" selected> Selecione.... </option>
                            <option *ngFor="let contagio of possibilidadeContagio" [value]="contagio.value">
                                {{ contagio.viewValue }}
                            </option>
                        </select>
                        <div class="invalid-feedback">
                            Campo obrigatório. Por favor, selecione uma opção.
                        </div>
                    </div>
                    <div class="form-group col-md-16">
                        <label>Resultado teste 1*: </label>
                        <select formControlName="teste1" id="teste1" class="form-control"
                            (blur)="salvarLocalStorage('teste1')"
                            [ngClass]="{'is-invalid':registerForm.get('teste1').touched && registerForm.get('teste1').invalid}"
                            required>
                            <option value="" selected> Selecione.... </option>
                            <option *ngFor="let contagio of contagios" [value]="contagio.value">
                                {{ contagio.viewValue }}</option>
                        </select>
                        <div class="invalid-feedback">
                            Campo obrigatório. Por favor, selecione uma opção.
                        </div>
                    </div>

                    <div class="form-group col-md-16">
                        <label>Resultado teste 2: </label>
                        <select formControlName="teste2" id="teste2" class="form-control"
                            (blur)="salvarLocalStorage('teste2')">
                            <option value="" selected> Selecione.... </option>
                            <option *ngFor="let contagio of contagios" [value]="contagio.value">
                                {{ contagio.viewValue }}</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary" [disabled]="!registerForm.valid">
                    Cadastrar
                </button>
            </form>
        </div>
    </div>
</div>